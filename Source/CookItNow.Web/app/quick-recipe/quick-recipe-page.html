<template>
	<require from="quick-recipe/components/quick-recipe-header"></require>
	<require from="quick-recipe/components/quick-recipe-step"></require>
	<require from="quick-recipe/components/quick-recipe-footer"></require>
	<require from="shared/components/measurable-ingredient"></require>
	<require from="shared/components/comments-form"></require>
	
	<div class="quick-recipe" class.bind="backgroundClass">
	    <header class="row">
			<quick-recipe-header containerless recipe.bind="recipe"></quick-recipe-header>
	    </header>
		
		<main class="row">
			<aside class="ingredients col left z-depth-2">
				<div class="border-box">
					<div class="content">
						<div class="title parallax-container valign-wrapper">
							<div class="section no-pad-bot">
								<div class="container">
									<div class="row center">
										<h3 class="header col s12">Ingredients</h3>
									</div>
								</div>
							</div>
							<div class="parallax" materialize="parallax">
								<img src="app/quick-recipe/assets/images/pouding.jpg" alt.bind="recipe.title">
							</div>
						</div>
						
						<div repeat.for="subrecipe of subrecipeIngredients" class="section">
							<h4 if.bind="subrecipe.subrecipeTitle" class="center">${subrecipe.subrecipeTitle}</h4>
							<ul class="ingredient-list collection">
								<li repeat.for="ingredient of subrecipe.ingredients" class="collection-item ingredient-item">
									<measurable-ingredient containerless ingredient.bind="ingredient"></measurable-ingredient>
									<small if.bind="ingredient.replacements" repeat.for="replacement of ingredient.replacements">
										<div>ou</div>
										<measurable-ingredient containerless ingredient.bind="replacement"></measurable-ingredient>
									</small>
								</li>
							</ul>
							
							<div class="divider col m10 offset-m1"></div>
						</div>
					</div>
				</div>
			</aside>
			
			<div class="main section col right">
				<div class="recipe-content" if.bind="!isRecipeDone">
					<div class="navbar">
						<nav>
							<div class="nav-wrapper">
								<ul class="subrecipe-titles">
									<li repeat.for="subrecipe of recipe.subrecipes" class="subrecipe-title ${$parent.activeSubrecipeId === subrecipe.id ? 'active' : ''}"><a href="#">${subrecipe.title}</a></li>
								</ul>
							</div>
						</nav>
					</div>
  
					<quick-recipe-step step.bind="previousestStep" class="step previousest-step" style="top: ${previousestStepPosition}px"></quick-recipe-step>
					<quick-recipe-step step.bind="previousStep" class="step previous-step" style="top: ${previousStepPosition}px"></quick-recipe-step>
					
					<div if.bind="currentStep" class="current-step-container">
						<quick-recipe-step step.bind="currentStep" class="step current-step"></quick-recipe-step>
					</div>
					
					<quick-recipe-step step.bind="nextStep" class="step next-step" style="top: ${nextStepPosition}px"></quick-recipe-step>
					<quick-recipe-step step.bind="nextestStep" class="step nextest-step" style="top: ${nextestStepPosition}px"></quick-recipe-step>
					
					<span class="step-actions">
						<a class="complete-button waves-light btn ${isFirstStep ? 'disabled' : ''}" click.delegate="backStep()"><i class="material-icons left">navigate_before</i></a>
						<a class="complete-button waves-light btn" click.delegate="completeStep()"><i class="material-icons right">navigate_next</i></a>
					</span>
				</div>
				
				<div class="comments-section col s12" if.bind="isRecipeDone">
					<div class="row center">
						<hgroup>
							<h3>Did you like your experience?</h3>
							<h4>We'd like to hear from you!</h4>
						</hgroup>
						<p>Please enter your comments or suggestions in the box below.</p>
					</div>
						
					<comments-form containerless></comments-form>
				</div>
			</div>
		</main>
				
		<footer class="row page-footer fixed">
			<quick-recipe-footer containerless url.bind="recipe.originalUrl"></quick-recipe-footer>
		</footer>
	</div>
</template>
