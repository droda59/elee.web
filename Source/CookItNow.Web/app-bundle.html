<template id="Views/app.html!view">
    
        <div class="page-host">
            <router-view></router-view>
        </div>
    
</template>
<template id="Views/nav-bar.html!view">
    <div class="navbar-fixed">
        <nav role="navigation">
            <div class="nav-wrapper">
                <div class="row">
                    <div class="col s12">
                        <a class="brand-logo" href="#">
                            <span>${router.title}</span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</template>
<template id="Views/quick-recipe-page.html!view">
	<require from="value-converters/duration-format"></require>
	<require from="value-converters/filter-on-property"></require>
	<require from="widgets/step"></require>
	<require from="widgets/ingredient"></require>
	
	<div class="quick-recipe">
	    <header class="row">
		    <div class="navbar-fixed">
		        <nav role="navigation">
		            <div class="nav-wrapper">
		                <div class="row">
		                    <div class="col m4">
		                        <a class="brand-logo left" href="#">
		                            Cook It Now
		                        </a>
		                    </div>
							<h3 class="col m8 offset-m4">
								<a class="dropdown-button left" href="#!" data-activates="recipe-info-dropdown" materialize="dropdown">
									<i class="material-icons left">arrow_drop_down</i>
									${recipe.title}
								</a>
								
								<a class="trigger-minimized right" click.trigger="toggleMinimizeActiveTimers()" show.bind="activeTimers.length" data-activates="active-timers-dropdown" materialize="dropdown">
									<i class="material-icons small white-text">av_timer</i>
								</a>
							</h3>
							
								
							<div id="recipe-info-dropdown" class="dropdown-content black-text">
								<div class="row">
									<div>Servings : ${recipe.originalServings}</div>
								</div>
								
								<div class="row">
									<ul>
								        <li repeat.for="duration of recipe.durations">
											<span>${duration.title} : ${duration.time | durationFormat}</span>
								        </li>
									</ul>
								</div>
							</div>
							
							<div id="active-timers-dropdown" class="dropdown-content black-text">
								<ul class="collection">
									<li repeat.for="timer of activeTimers" class="collection-item avatar">
										<i class="material-icons circle ${timer.state == 'isAlmostDone' ? 'yellow' : timer.state == 'isAlmosterDone' ? 'red' : 'green'}">av_timer</i>
										<span class="title">${timer.action}</span>
										<p class="${timer.state == 'isAlmostDone' ? 'yellow-text' : timer.state == 'isAlmosterDone' ? 'red-text' : 'green-text'}">${timer.remainingTime} of ${timer.duration | durationFormat}</p>
										<span class="secondary-content">
											<a click.trigger="timer.pause()" show.bind="!timer.isPaused"><i class="material-icons">pause</i></a>
											<a click.trigger="timer.play()" show.bind="timer.isPaused"><i class="material-icons">play_arrow</i></a>
											<a click.trigger="timer.delete()"><i class="material-icons">delete</i></a>
										</span>							
									</li>
								</ul>
							</div>
		                </div>
		            </div>
		        </nav>
		    </div>
	    </header>
		
		<main class="row">
			<aside class="ingredients col left z-depth-2">
				<div class="border-box">
					<div class="content">
						<div class="title parallax-container valign-wrapper">
							<div class="section no-pad-bot">
								<div class="container">
									<div class="row center">
										<h5 class="header col s12 light">Ingrédients</h5>
									</div>
								</div>
							</div>
							<div class="parallax" materialize="parallax">
								<img src="Content/images/pouding.jpg" alt.bind="recipe.title">
							</div>
						</div>
						
						<div repeat.for="subrecipe of subrecipeIngredients" class="section">
							<h5 if.bind="subrecipe.subrecipeTitle" class="center">${subrecipe.subrecipeTitle}</h5>
							<ul class="ingredient-list collection">
								<li repeat.for="ingredient of subrecipe.ingredients" class="collection-item ingredient-item">
									<compose view-model="widgets/ingredient" model.bind="ingredient"></compose>
									<small if.bind="ingredient.replacements" repeat.for="replacement of ingredient.replacements">
										<div>ou</div>
										<compose view-model="widgets/ingredient" model.bind="replacement"></compose>
									</small>
								</li>
							</ul>
							
							<div class="divider col m10 offset-m1"></div>
						</div>
					</div>
				</div>
			</aside>
			
			<div class="main section col right">
				<div if.bind="recipe.requirements">
					<h4>Préparation</h4>
					<ol>
						<li repeat.for="requirement of recipe.requirements" class="step">
							<span class="action">${requirement.action}</span>
							<compose view-model="widgets/ingredient" model.bind="$parent.recipe.ingredients | filterSingleOnProperty:'id':requirement.ingredientId"></compose>
						</li>
					</ol>
				</div>
				
				<div repeat.for="subrecipe of subrecipeSteps">
					<h2 if.bind="subrecipe.subrecipeTitle" class="center">${subrecipe.subrecipeTitle}</h2>
					<ol>
						<li repeat.for="step of subrecipe.steps" class="step">
							<compose model.bind="step" view-model="widgets/step"></compose>
						</li>
					</ol>
				</div>
			</div>
		</main>
				
		<footer class="row page-footer fixed">
	    	<div class="row">
				<div class="col m4 left">
					<span class="grey-text text-lighten-3">© 2015 Copyright GentleMotherlovingChef</span>
				</div>
	      		<div class="col m8 right">
					<span class="right">
		    			<small class="white-text">Recette originale: </small>
						<a href.bind="recipe.originalUrl" target="_blank" class="grey-text text-lighten-4">${recipe.originalUrl}</a>
					</span>
	      		</div>
			</div>
	    </footer>
	</div>
</template>
<template id="Views/welcome.html!view">
	<div id="index-banner" class="parallax-container">
	    <div class="section no-pad-bot">
  			<div class="container">
  				<br><br>
  				<h1 class="header center teal-text text-lighten-2">Cook it now</h1>
  				<div class="row center">
  					<h5 class="header col s12 light">A modern, easy-to-use recipe application based on real-world needs</h5>
  				</div>
  				<div class="row center">
            <form class="col s12" submit.delegate="loadRecipe()" novalidate="">
              <div class="row">
                <div class="input-field center col s6 offset-s3">
                  <select value.bind="selectedRecipeId" materialize="select">
                    <option>Select a recipe</option>
                    <option repeat.for="recipe of recipes" value.bind="recipe.id">${recipe.title}</option>
                  </select>
                  <label>Recipe selection</label>
                </div>
              </div>
              <div class="row center">
                <button class="btn-large waves-effect waves-light" type="submit" name="action">
                  Cook it now!
                  <i class="material-icons right">send</i>
                </button>
              </div>
            </form>
  				</div>
  				<br><br>
  			</div>
	    </div>
	    <div class="parallax" materialize="parallax">
			   <img src="Content/images/background1.jpg" alt="Unsplashed background img 2">
		  </div>
	</div>

  <div class="container">
    <div class="section">
      <!--   Icon Section   -->
      <div class="row">
        <div class="col s12 m4">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="mdi-image-flash-on"></i></h2>
            <h5 class="center">Grounded on reality</h5>

            <p class="light">We focused on real people following real recipes in the real world.</p>
          </div>
        </div>

        <div class="col s12 m4">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="mdi-social-group"></i></h2>
            <h5 class="center">Focused on the user</h5>

            <p class="light">For you, a human being, in your kitchen, cooking dinner for your family or your friends. Spend less time understanding recipes, and more with your loved ones.</p>
          </div>
        </div>

        <div class="col s12 m4">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="mdi-action-settings"></i></h2>
            <h5 class="center">Simple as fuck</h5>

            <p class="light">We have put most of our efforts on the ease of use, because we know you are multi-tasking. You need a clean, simple and intuitive interface to be efficient.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
      <div class="container">
        <div class="row center">
          <h5 class="header col s12 light">A modern responsive front-end framework based on Material Design</h5>
        </div>
      </div>
    </div>
    <div class="parallax" materialize="parallax">
      <img src="Content/images/background3.jpg" alt="Unsplashed background img 2">
    </div>
  </div>

  <div class="container">
    <div class="section">
      <div class="row">
        <div class="col s12 center">
          <h3><i class="mdi-content-send brown-text"></i></h3>
          <h4>Contact Us</h4>
          <p class="left-align light">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam scelerisque id nunc nec volutpat. Etiam pellentesque tristique arcu, non consequat magna fermentum ac. Cras ut ultricies eros. Maecenas eros justo, ullamcorper a sapien id, viverra ultrices eros. Morbi sem neque, posuere et pretium eget, bibendum sollicitudin lacus. Aliquam eleifend sollicitudin diam, eu mattis nisl maximus sed. Nulla imperdiet semper molestie. Morbi massa odio, condimentum sed ipsum ac, gravida ultrices erat. Nullam eget dignissim mauris, non tristique erat. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;</p>
        </div>
      </div>
    </div>
  </div>

  <div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
      <div class="container">
        <div class="row center">
          <h5 class="header col s12 light">A modern responsive front-end framework based on Material Design</h5>
        </div>
      </div>
    </div>
    <div class="parallax" materialize="parallax">
      <img src="Content/images/background2.jpg" alt="Unsplashed background img 3">
    </div>
  </div>
</template>
<template id="Views/widgets/ingredient.html!view">
	<require from="value-converters/quantity-plural-format"></require>
	<require from="value-converters/quantity-human-format"></require>
	
	<span class="ingredient">
		<span class="value" if.bind="quantity.isConvertible &amp;&amp; quantity.getValidConvertibleMeasureUnits().length > 1">
			<select class="input-field" value.bind="measureUnit" materialize="select">
	            <option repeat.for="measureUnit of quantity.getValidConvertibleMeasureUnits()" value.bind="measureUnit.unit">${measureUnit.value | quantityHumanFormat}${measureUnit.unit | quantityPluralFormat:measureUnit.value}</option>
	        </select> 
		</span>
		<span if.bind="!quantity.isConvertible || quantity.getValidConvertibleMeasureUnits().length == 1">
			<span class="value">${quantity.value | quantityHumanFormat}</span>
			<span class="unit">${measureUnit | quantityPluralFormat:quantity.value}</span>
		</span>
		${nextWord}  
		<span class="type">${ingredientName} <span if.bind="requirements" class="requirements">(${requirements})</span></span> 
	</span>
</template>
<template id="Views/widgets/step-action.html!view">
	<span class="action">${action}</span>
</template>
<template id="Views/widgets/step-ingredient.html!view">
	<require from="value-converters/quantity-plural-format"></require>
	<require from="value-converters/quantity-human-format"></require>
	
	<span class="ingredient">
		<span class="value">${quantity.value | quantityHumanFormat}</span>
		<span class="unit">${measureUnit | quantityPluralFormat:quantity.value}</span>
		${nextWord}  
		<span class="type">${ingredientName}<span if.bind="requirements" class="requirements"> (${requirements})</span></span> 
	</span>
</template>
<template id="Views/widgets/step-text.html!view">
	<span>${value}</span>
</template>
<template id="Views/widgets/step-timer.html!view">
	<require from="value-converters/duration-format"></require>
	
	<span class="timer"> 
		<a click.trigger="timer.start()"> 
			<i class="material-icons">av_timer</i>   
			<span>${timer.remainingTime}</span>
		</a>  
	</span>
</template>
<template id="Views/widgets/step.html!view">
	<require from="widgets/step-text"></require>
	<require from="widgets/step-action"></require>
	<require from="widgets/step-timer"></require>
	<require from="widgets/step-ingredient"></require>
	
	<p repeat.for="phrase of step.phrases">
		<compose repeat.for="part of phrase.parts" model.bind="part" view-model="widgets/step-${part.type}"></compose>
	</p>
	<compose if.bind="step.postStep" model.bind="step.postStep" view-model="widgets/step"></compose>
</template>